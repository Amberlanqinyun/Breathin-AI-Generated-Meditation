{% extends 'base.html' %}

{% block title %}breathe in{% endblock %}

{% block content %}
  {% if audio_file %}
    <div id="meditation-page" class="content-center" style="position: relative;">
      <img src="{{ url_for('static', filename='images/logo.gif') }}" alt="Logo" class="logo-img">
      <audio id="meditation-audio" autoplay>
        <source src="{{ url_for('static', filename=audio_file) }}" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
      <div id="play-pause-indicator" class="play-pause play-indicator"></div>
    </div>
  {% endif %}
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const audio = document.getElementById('meditation-audio');
    const playPauseIndicator = document.getElementById('play-pause-indicator');
    const meditationPage = document.getElementById('meditation-page');

    meditationPage.addEventListener('click', function() {
      if (audio.paused) {
        audio.play();
        playPauseIndicator.classList.remove('pause-indicator');
        playPauseIndicator.classList.add('play-indicator');
      } else {
        audio.pause();
        playPauseIndicator.classList.remove('play-indicator');
        playPauseIndicator.classList.add('pause-indicator');
      }
    });
  });
</script>
{% endblock %}

{% block styles %}
<style>
  #meditation-page {
    cursor: pointer;
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  audio {
    display: none; /* Hide the audio controls */
  }

  #play-pause-indicator {
    position: absolute;
    width: 100px;
    height: 100px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-size: contain;
    background-repeat: no-repeat;
    pointer-events: none; /* Allow clicks to pass through to the parent div */
  }

  .play-indicator {
    background-image: url('{{ url_for('static', filename='images/play-icon.png') }}'); /* Use a play icon image */
  }

  .pause-indicator {
    background-image: url('{{ url_for('static', filename='images/pause-icon.png') }}'); /* Use a pause icon image */
  }
</style>
{% endblock %}
